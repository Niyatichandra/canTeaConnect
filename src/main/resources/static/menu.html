<!DOCTYPE html>
<html>
<head>
    <title>Menu - CanTea Connect</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 40px; background-color: #f8f9fa; }
        .menu-card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); max-width: 600px; margin: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        th { color: #666; text-transform: uppercase; font-size: 12px; }
        .price { color: #2e7d32; font-weight: bold; }
        .btn-add { background: #ff9800; color: white; border: none; padding: 6px 12px; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>

<div class="menu-card">
    <h2 id="canteen-title">Canteen Menu</h2>
    <table id="menu-table">
        <thead>
        <tr>
            <th>Item</th>
            <th>Price</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <button onclick="window.location.href='index.html'" style="margin-top:20px;">Back</button>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get('id');

    // Fetching the Joined data from your Controller
    fetch(`http://localhost:8080/api/menu/${id}`)
        .then(res => res.json())
        .then(data => {
            const tbody = document.querySelector("#menu-table tbody");
            tbody.innerHTML = "";

            data.forEach(item => {
                // item[0] = i_name (from items table)
                // item[1] = price (from menu table)
                const row = `<tr>
                    <td><strong>${item[0]}</strong></td>
                    <td class="price">â‚¹${item[1]}</td>
                    <td><button class="btn-add">Add</button></td>
                </tr>`;
                tbody.innerHTML += row;
            });
        })
        .catch(err => {
            console.error("Error:", err);
            document.querySelector("#menu-table tbody").innerHTML = "<tr><td colspan='3'>Error connecting to server.</td></tr>";
        });
</script>
</body>
</html>